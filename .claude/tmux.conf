# ═══════════════════════════════════════════════════════════════════════════
# CLAUDE OS TMUX CONFIG — Local to this repo
# Sourced by restart.sh when creating the 'life' session.
# Does NOT replace ~/.tmux.conf
# ═══════════════════════════════════════════════════════════════════════════

# Better colors
set -g default-terminal "screen-256color"
set -ga terminal-overrides ",xterm-256color:Tc"

# Large scrollback
set -g history-limit 50000

# Start at 1
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# No escape delay
set -s escape-time 0

# Mouse support
set -g mouse on

# Slow scroll (2 lines per tick)
bind -T copy-mode-vi WheelUpPane send-keys -X -N 2 scroll-up
bind -T copy-mode-vi WheelDownPane send-keys -X -N 2 scroll-down
bind -T copy-mode WheelUpPane send-keys -X -N 2 scroll-up
bind -T copy-mode WheelDownPane send-keys -X -N 2 scroll-down

# Copy to clipboard
set -g set-clipboard on

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes
bind -r C-Left resize-pane -L 5
bind -r C-Right resize-pane -R 5
bind -r C-Up resize-pane -U 5
bind -r C-Down resize-pane -D 5

# Intuitive splits
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind '"' split-window -v -c "#{pane_current_path}"
bind % split-window -h -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"

# Status bar - bottom, Claude terra cotta theme
set -g status-position bottom
set -g status-interval 2
set -g status-style 'bg=#1a1a1a fg=#e8e4df'

# Status left: Claude icon + session name
set -g status-left '#[bg=#da7756,fg=#1a1a1a,bold]  󰚩  #[bg=#252320,fg=#da7756]#[bg=#252320,fg=#e8e4df] #S #[bg=#1a1a1a,fg=#252320]#[fg=default] '
set -g status-left-length 40

# Status right: health + context + time (uses local script)
set -g status-right '#(CLAUDE_OS_ROOT/tmux-status.sh)'
set -g status-right-length 80

# Window tabs
set -g window-status-format '#[fg=#6b6560] #{?#{==:#{window_name},zsh},󰆍,#{?#{m:chief-*,#{window_name}},󰔶,#{?#{m:system-*,#{window_name}},,#{?#{m:focus-*,#{window_name}},󰓾,#{?#{m:mission-*,#{window_name}},󱐋,}}}}} #W '
set -g window-status-current-format '#[bg=#1a1a1a,fg=#da7756]#[bg=#da7756,fg=#1a1a1a,bold] #{?#{==:#{window_name},zsh},󰆍,#{?#{m:chief-*,#{window_name}},󰔶,#{?#{m:system-*,#{window_name}},,#{?#{m:focus-*,#{window_name}},󰓾,#{?#{m:mission-*,#{window_name}},󱐋,}}}}} #W #[bg=#1a1a1a,fg=#da7756]'
set -g window-status-activity-style 'fg=#e8c170'
set -g window-status-separator '  '

# Pane borders - terra cotta active
set -g pane-border-style 'fg=#3a3835'
set -g pane-active-border-style 'fg=#da7756'
set -g pane-border-lines heavy
set -g display-panes-time 2000
set -g display-panes-colour '#6b6560'
set -g display-panes-active-colour '#da7756'

# Messages
set -g message-style 'bg=#da7756 fg=#1a1a1a bold'
set -g message-command-style 'bg=#e8976b fg=#1a1a1a'

# Notifications
set -g visual-bell on
set -g bell-action any
setw -g monitor-activity on
set -g visual-activity off

# Copy mode (vim-style)
setw -g mode-keys vi
bind -T copy-mode-vi v send-keys -X begin-selection
bind -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
set -g mode-style 'bg=#da7756 fg=#1a1a1a'

# Reload config
bind r source-file CLAUDE_OS_ROOT/tmux.conf \; display-message "  Config reloaded!"
